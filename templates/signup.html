{% extends 'base.html' %}
{% block page_content %}

{% if error_message %}
    <div class='update-self-messages' style='border: 1px solid red;'>
        <p style="color: red;">{{ error_message }}</p>
    </div> 
{% endif %}

<div  class='update-self' id='add_customer_by_manager'>

    <p id="update-header">Sign Up to Pegasus</p>

    <form action="/signup" method="post">

        <div id='name'>
            <label for="fname">First Name:</label><br>
            <input type="text" id="fname" name="fname" maxlength="50" 
                value="{{ request.form['fname'] | default('') }}" required><br>
            <label for="lname">Last Name:</label><br>
            <input type="text" id="lname" name="lname" maxlength="50" 
                value="{{ request.form['lname'] | default('') }}" required><br>
        </div>

        <div id='address'>
            <div id='airline_country-div'>
                <label for="airline_country">Country:</label><br>
                <select id="airline_country" name="country" required>
                    {% set selected_country = request.form.get('airline_country', '') %}
                    {% for country in countries %}
                        <option value="{{ country[1] }}" {% if country[1] == selected_country %}selected{% endif %}>
                            {{ country[1] }}
                        </option>
                    {% endfor %}
                </select><br>
            </div>

            <label for="address">City and Full Adress:</label><br>
            <input type="text" id="address" name="address" maxlength="150" placeholder='New York, Main str 123' 
                value="{{ request.form['address'] | default('') }}" required><br>
        </div>

        <div id='phone'>
            <label for="phone_country_code">Phone Country Code:</label>
            <input type="tel" id="phone_country_code" name="phone_country_code" pattern="[0-9]{1,3}" minlength="1" 
                maxlength="3" placeholder='+975' 
                value="{{ request.form['phone_country_code'] | default('') }}" required ><br>
            <label for="phone">Phone Number:</label><br>
            <input type="tel" id="phone" name="phone" pattern="[0-9]{8,12}" minlength="8" maxlength="12" 
                value="{{ request.form['phone'] | default('') }}"  required ><br>
        </div>

        <div id='email'>
            <label for="email">Email:</label><br>
            <input type="email" id="email" name="email" 
                pattern="[a-zA-Z0-9.]{1,30}[@]+[a-zA-Z0-9]{1,10}[.]+[a-zA-Z0-9.]{1,10}" maxlength="50" 
                value="{{ request.form['email'] | default('') }}" required><br>
        </div> 

        <div id='credit_card'>
            <label for="credit_card">Credit Card Number:</label><br>
            <input type="text" id="credit_card" name="credit_card"  pattern="[0-9]{6,16}" minlength="6" 
                maxlength="16" value="{{ request.form['credit_card'] | default('') }}" required><br>
            <label for="credit_card_exp_date">Exp. Date:</label>
            <label for="credit_card_cvv">CVV:</label><br>
            <input type="month" id="credit_card_exp_date" name="credit_card_exp_date" 
                value="{{ request.form['credit_card_exp_date'] | default('') }}" required>
            <input type="text" id="credit_card_cvv" name="credit_card_cvv" pattern="[0-9]{3}" 
                value="{{ request.form['credit_card_cvv'] | default('') }}" required><br>
        </div>

        <div id='username'>
            <label for="username">Username:</label><br>
            <input type="text" id="username" name="username" pattern="[a-zA-Z0-9]{6,50}" minlength="6" 
                maxlength="50" value="{{ request.form['username'] | default('') }}" required><br>
            <span class="sub-label">Can include letters and numbers only, At least 6 characters.</span><br><br>
        </div>

        <div id='password'>
            <label for="password">Password:</label><br>
            <input type="password" id="password" name="password" pattern="[a-zA-Z0-9]+{6,50}" 
                minlength="6" maxlength="50" required><br>
                <span class="sub-label">Must include a Capital and a lowercase letters, as well a number.</span>
                <span class="sub-label">At least 6 characters.</span><br><br> 
            <label for="password_reinput">Input Password Again:</label><br>
            <input type="password" id="password_reinput" name="password_reinput" pattern="[a-zA-Z0-9]+{6,50}" 
                minlength="6" maxlength="50" placeholder='Repeat Password' required><br>
        </div>

        <button type="submit" value="Add Customer" class='update-self-submit'>Sign Up!</button>

    </form>  

</div>

{% endblock %}