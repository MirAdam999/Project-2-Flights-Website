{% extends 'base.html' %}
{% block page_content %}

<div class='manage'>

    <div class='manage-top'>
        <div id="add">
            <form method="post" action="{{ url_for('routes.add_admin_form') }}"  style="display: inline-block;">
                <button type="submit">Add Administrator +</button>
            </form>
        </div>
        <div id="manage-header">
            <p>Manage Administrators</p>
            {% if status_change %}
            <p id='activation_message'>Admin {{status_change[0]}} Sucsessfuly, AdminID: {{status_change[1]}}</p>
            {% endif %}
        </div>
        <div id='search_by_id'>
            <form action="/search_for_admin_by_id" method="post">
                <label for="admin_id">Search by Admin ID:</label>
                <input type="number" id="admin_id" name="admin_id" required >
                <input type="submit" value="Search" id='search_by_id_button'>
            </form> 
        </div>
    </div>

    <div id='admins'>
        {% if admins %}
            <table>
                <tr>
                    <th>AdminID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>UserID</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th>Manage Admin</th>
                </tr>

                {% for admin in admins%}
                <tr>
                {% if admin[6] == "Active" %} 
                <form method="post" action="/disactivate_admin"  style="display: inline-block;">
                {% else %}
                <form method="post" action="/reactivate_admin"  style="display: inline-block;">
                {% endif %}
                    <div id='admin'>
                        <td id="admin_id" name="admin_id">{{admin[0]}}</td>
                        <td id="fname" name="fname">{{admin[1]}}</td>
                        <td id='lname' name='lname'>{{admin[2]}}</td>
                        <td id="user_id" name="user_id">{{admin[3]}}</td>
                        <td id='username' name='username'>{{admin[4]}}</td>
                        <td id='email' name='email'>{{admin[5]}}</td>
                        <td id='status' name='status'>{{admin[6]}}</td>
                    </div>
                    
                    <div id='manage_admin'>
                        <td>
                            {% if admin[6] == "Active" %}       
                            <button type="submit" id='disactivate' name="admin_id" value="{{ admin[0] }}" {% if admin[3] == own_id %} disabled {% endif %}>Disactivate Admin</button>
                            {% else %}
                            <button type="submit" id='reactivate' name="admin_id" value="{{ admin[0] }}">Re-activate Admin</button>
                            {% endif %}
                        </td>
                    </div>
                </form>
                </tr>
                {% endfor %}

            </table>
        {% else %}

        <p id='none-found'>No Administrators Matching Search Found</p>

        {% endif %}
    </div>

</div>

{% endblock %}